(this["webpackJsonptop-news"]=this["webpackJsonptop-news"]||[]).push([[0],{105:function(e,t,a){e.exports=a.p+"static/media/no_image.cdaec342.png"},172:function(e,t,a){e.exports=a(314)},177:function(e,t,a){},178:function(e,t,a){},314:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(35),l=a.n(r),s=(a(177),a(74)),i=a(75),c=a(50),u=a(82),h=a(81),d=(a(178),a(327)),y=a(161),g=a(315),p=a(30),v=a(105),m=a.n(v),f=a(76),k=a.n(f),w=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return o.a.createElement("div",{className:"ui container"},o.a.createElement(d.a.Group,{stackable:!0,itemsPerRow:"3"},this.props.articles.map((function(e,t){return o.a.createElement(d.a,{key:t,color:"grey",centered:!0},o.a.createElement(y.a,{label:{color:"grey",content:"".concat(e.source.name),ribbon:!0,src:m.a},src:null!==e.urlToImage?e.urlToImage:m.a}),o.a.createElement(d.a.Content,null,o.a.createElement(d.a.Meta,null,k()(e.publishedAt,"ddd, mmmm dS - h:MM TT")),o.a.createElement("br",null),o.a.createElement(d.a.Header,null,e.title),o.a.createElement("br",null),o.a.createElement(d.a.Description,null,e.description)),o.a.createElement("br",null),o.a.createElement(g.a,{animated:"vertical",color:"grey",href:e.url,target:"_blank"},o.a.createElement(g.a.Content,{visible:!0},"Read more..."),o.a.createElement(g.a.Content,{hidden:!0},o.a.createElement(p.a,{name:"arrow right"}))))}))))}}]),a}(n.Component),x=[{key:1,text:"General",value:"general"},{key:2,text:"Technology",value:"technology"},{key:3,text:"Business",value:"business"},{key:4,text:"Entertainment",value:"entertainment"},{key:5,text:"Science",value:"science"},{key:6,text:"Health",value:"health"},{key:7,text:"Sports",value:"sports"}],b=[{key:1,text:"UAE",value:"ae"},{key:5,text:"Belgium",value:"be"},{key:7,text:"Brazil",value:"br"},{key:8,text:"Canada",value:"ca"},{key:10,text:"China",value:"cn"},{key:12,text:"Cuba",value:"cu"},{key:14,text:"Germany",value:"de"},{key:15,text:"Egypt",value:"eg"},{key:16,text:"France",value:"fr"},{key:17,text:"UK",value:"gb"},{key:19,text:"Hong Kong",value:"hk"},{key:21,text:"Indonesia",value:"id"},{key:22,text:"Ireland",value:"ie"},{key:23,text:"Israel",value:"il"},{key:25,text:"Italy",value:"it"},{key:26,text:"Japan",value:"jp"},{key:27,text:"Korea",value:"kr"},{key:33,text:"Nigeria",value:"ng"},{key:35,text:"Norway",value:"no"},{key:36,text:"New Zealand",value:"nz"},{key:37,text:"Philippines",value:"ph"},{key:42,text:"Russia",value:"ru"},{key:43,text:"Saudi Arabia",value:"sa"},{key:44,text:"Sweden",value:"se"},{key:45,text:"Singapore",value:"sg"},{key:48,text:"Thailand",value:"th"},{key:49,text:"Turkey",value:"tr"},{key:52,text:"USA",value:"us"},{key:54,text:"South Africa",value:"za"}],E=[{key:1,text:"Arabic",value:"ar"},{key:2,text:"German",value:"de"},{key:3,text:"English",value:"en"},{key:4,text:"Spanish",value:"es"},{key:5,text:"French",value:"fr"},{key:6,text:"Hebrew",value:"he"},{key:7,text:"Italian",value:"it"},{key:8,text:"Dutch",value:"nl"},{key:9,text:"Norwegian",value:"no"},{key:10,text:"Portuguese",value:"pt"},{key:11,text:"Russian",value:"ru"},{key:12,text:"Northern",value:"se"},{key:13,text:"Chinese",value:"zh"}],C=a(329),R=a(323),S=a(57),T=a(324),N=a(325),P=a(330),D=(a(282),"3b988ce4f31c473fae5bfd8fc5b274a5"),j="https://cors-anywhere.herokuapp.com/",H=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).changePage=function(e,t){e.persist(),n.setState({page:t.activePage}),n.state.showHeadlines?n.fetchTopHeadlines(n.state.country,n.state.category,t.activePage):n.fetchNewsWithKeywords(n.state.keyword,t.activePage)},n.onKeyPress=function(e){"Enter"===e.key&&n.handleButtonSearch()},n.handleButtonSearch=function(e){n.setState({page:"1"}),n.fetchNewsWithKeywords(n.state.keyword,"1"),n.input.value=""},n.getKeywordTyped=function(e,t){e.persist(),n.setState({keyword:t.value})},n.handleLanguageDropdownChange=function(e,t){e.persist(),n.setState({language:t.value})},n.handleCountryDropdownChange=function(e,t){e.persist(),n.setState({country:t.value,page:"1"}),n.fetchTopHeadlines(t.value,n.state.category)},n.handleCategoryDropdownChange=function(e,t){e.persist(),n.setState({category:t.value,page:"1"}),n.fetchTopHeadlines(n.state.country,t.value)},n.state={totalResults:"",articles:[],country:"ca",category:"general",keyword:"",language:"en",date:"",page:"1",showHeadlines:!0,keywordTyped:"",dailyQuotaReached:!1},n.fetchTopHeadlines=n.fetchTopHeadlines.bind(Object(c.a)(n)),n.fetchNewsWithKeywords=n.fetchNewsWithKeywords.bind(Object(c.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=new Date((new Date).setDate((new Date).getDate()-20));this.setState({date:k()(e,"yyyy-mm-dd")}),this.fetchTopHeadlines(this.state.country,this.state.category,this.state.page)}},{key:"fetchTopHeadlines",value:function(e,t,a){var n=this;fetch("".concat(j,"https://newsapi.org/v2/top-headlines?country=").concat(e,"&category=").concat(t,"&pageSize=20&page=").concat(a,"&apiKey=").concat(D)).then((function(e){if(e.ok)return e.json();n.setState({dailyQuotaReached:!0})})).then((function(e){e&&n.setState({totalResults:e.totalResults,articles:e.articles})})),this.setState({showHeadlines:!0})}},{key:"fetchNewsWithKeywords",value:function(e,t){var a=this;e.length>0&&(fetch("".concat(j,"https://newsapi.org/v2/everything?q=").concat(e,"&language=").concat(this.state.language,"&from=").concat(this.state.date,"&sortBy=publishedAt&pageSize=20&page=").concat(t,"&apiKey=").concat(D)).then((function(e){if(e.ok)return e.json();a.setState({dailyQuotaReached:!0})})).then((function(e){e&&a.setState({totalResults:e.totalResults,articles:e.articles})})),this.setState({showHeadlines:!1,keywordTyped:e}))}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(C.a,{inverted:!0,stackable:!0,attached:!0},o.a.createElement(R.a,null,o.a.createElement("a",{href:"top-news",style:{display:"flex",textDecoration:"none"}},o.a.createElement(C.a.Item,{color:"red",active:!0,header:!0},"Top News")),o.a.createElement(S.a,{style:{textAlign:"right"},pointing:!0,scrolling:!0,openOnFocus:!0,inline:!0,item:!0,placeholder:"Country",defaultValue:"ca",onChange:this.handleCountryDropdownChange,options:b}),o.a.createElement(S.a,{openOnFocus:!0,inline:!0,item:!0,placeholder:"Category",defaultValue:"general",onChange:this.handleCategoryDropdownChange,options:x}),o.a.createElement("div",{className:"right menu",style:{padding:"0.25rem"}},o.a.createElement(T.a,{type:"text",placeholder:"Search by keyword...",action:!0,onChange:this.getKeywordTyped,onKeyPress:this.onKeyPress},o.a.createElement("input",{name:"input",ref:function(t){return e.input=t}}),o.a.createElement(N.a,{compact:!0,options:E,defaultValue:"en",onChange:this.handleLanguageDropdownChange}),o.a.createElement(g.a,{color:"blue",type:"submit",onClick:this.handleButtonSearch},"Search"))))),o.a.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"center",marginTop:"2rem",marginBottom:"2.5rem"}},o.a.createElement(P.a,{boundaryRange:1,siblingRange:1,ellipsisItem:null,firstItem:null,lastItem:null,totalPages:(this.state.totalResults?Math.ceil(this.state.totalResults/20):1)>5?5:Math.ceil(this.state.totalResults/20),onPageChange:this.changePage,activePage:this.state.page})),this.state.showHeadlines&&!this.state.dailyQuotaReached&&o.a.createElement("div",{className:"searchResults"},o.a.createElement("h2",{className:"ui header"},"Showing ",x.find((function(t){return t.value===e.state.category})).text," Top News in ",b.find((function(t){return t.value===e.state.country})).text)),!this.state.showHeadlines&&!this.state.dailyQuotaReached&&o.a.createElement("div",{className:"searchResults"},o.a.createElement("h2",{className:"ui header"},"Showing search results for '",this.state.keywordTyped,"'"),o.a.createElement("div",{className:"ui header searchResults"},o.a.createElement("a",{href:"top-news",style:{textDecoration:"none",outline:"none"}},"Go back to Canada Top News"))),this.state.dailyQuotaReached&&o.a.createElement("div",{className:"searchResults"},o.a.createElement("h3",{className:"ui header",style:{color:"red"}},"Unable to fetch from the API: daily quota reached.")),o.a.createElement(w,{articles:this.state.articles}),o.a.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"center",marginTop:"35px"}},o.a.createElement(P.a,{boundaryRange:1,siblingRange:1,ellipsisItem:null,firstItem:null,lastItem:null,totalPages:(this.state.totalResults?Math.ceil(this.state.totalResults/20):1)>5?5:Math.ceil(this.state.totalResults/20),onPageChange:this.changePage,activePage:this.state.page})),o.a.createElement("footer",{style:{marginTop:"6rem",textAlign:"center",backgroundColor:"RGB(27, 28, 29)",padding:"0.8rem"}},o.a.createElement("a",{href:"https://newsapi.org/",target:"_blank",rel:"noopener noreferrer",style:{color:"RGB(33, 133, 208)",outline:"none"}},"Powered by NewsAPI.org")))}}]),a}(n.Component),I=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function K(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}a(313);l.a.render(o.a.createElement(H,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/top-news",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/top-news","/service-worker.js");I?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):K(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):K(e)}))}}()}},[[172,1,2]]]);
//# sourceMappingURL=main.deba6210.chunk.js.map